@model PaymentGateway.Models.TransactionViewModel

@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{

    ViewBag.Title = "Data Table";
}

<script>
$(document).ready(function(){
  $("#transaction").on("keyup", function() {
    var value = $(this).val().toLowerCase();
    $("#id").filter(function() {
      $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
    });
  });
});
</script>
<h2>Data Table </h2>
<table id="dataTable" class="table table-bordered table-striped"> </table>
<a class="btn btn-success" style="margin-bottom:10px" onclick="PopupForm('@Url.Action("AddOrEdit","Transaction")')"><i class="fa fa-plus"></i> Add New</a>

@section scripts {
    <script>
        $(document).ready(function () {
            // Initialize DataTable
            $('#dataTable').DataTable({
                "ajax": {
                    url: '/Transactions/GetDataForDataTable',
                    type: 'POST',
                    datatype: 'JSON',
                    dataSrc:""
                },
                //console.log(data);
                "columns": [
                    { data: 'id', title: 'Transaction ID' },
                    { data: 'sender.name', title: 'Sender Name' },
                    { data: 'sender.iD_NO', title: 'Sender ID NO' },
                    { data: 'sender.phone_No', title: 'Sender Phone NO' },
                    { data: 'sender.src_Account', title: 'Sender Source Account' },
                    { data: 'receiver.name', title: 'Receiver Name' },
                    { data: 'receiver.iD_NO', title: 'Receiver ID NO' },
                    { data: 'receiver.phone_No', title: 'Receiver Phone NO' },
                    { data: 'receiver.dst_Account', title: 'Receiver Destination Account' },
                    { data: 'amount', title: 'Amount' },
                    { data: 'date', title: 'Transaction Date' },
                    {
                        "render": function (data, type, full, meta) { return '<a class="btn btn-info" href="AddTransaction' + full.id + '">Edit</a>'; }
                    },
                    {
                        data: null, render: function (data, type, row) {
                            return "<a href='#' class='btn btn-danger' onclick=DeleteData('" + row.id + "'); >Delete</a>";
                        }
                    },
                ]
            });
        });

    </script>
    
}